# ğŸ“Š Ù†Ø¸Ø§Ù… ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„Ø¨Ø´Ø±ÙŠØ© - HR Analytics

Ù†Ø¸Ø§Ù… Ù…ØªÙ‚Ø¯Ù… Ù„ØªØ­Ù„ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„Ø¨Ø´Ø±ÙŠØ© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ÙˆØ§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø¢Ù„ÙŠ.

## ğŸš€ Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

- âœ… **ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø¢Ù…Ù†** - Ù…ØµØ§Ø¯Ù‚Ø© Ù‚ÙˆÙŠØ© Ù…Ø¹ bcrypt
- âœ… **Ø±ÙØ¹ Ù…Ù„ÙØ§Øª Excel** - Ù…Ø¹Ø§Ù„Ø¬Ø© Ø³Ø±ÙŠØ¹Ø© Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¶Ø®Ù…Ø©
- âœ… **ØªØ­Ù„ÙŠÙ„ Ø°ÙƒÙŠ Ø¨Ù€ AI** - ØªÙˆÙ‚Ø¹Ø§Øª ÙˆØªØµÙ†ÙŠÙØ§Øª Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… scikit-learn
- âœ… **Ø±Ø³ÙˆÙ… Ø¨ÙŠØ§Ù†ÙŠØ© ØªÙØ§Ø¹Ù„ÙŠØ©** - Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø¨Ø´ÙƒÙ„ Ù…Ø±Ø¦ÙŠ
- âœ… **ØªÙˆØµÙŠØ§Øª Ø°ÙƒÙŠØ©** - Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªÙ†ÙÙŠØ°

## ğŸ› ï¸ Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø­Ù„ÙŠ

```bash
# 1. ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª
pip3 install -r requirements.txt

# 2. Ø§Ù„ØªØ´ØºÙŠÙ„
python3 app.py

# 3. Ø§ÙØªØ­ Ø§Ù„Ù…ØªØµÙØ­
http://127.0.0.1:8002
```

## ğŸ“ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„

```
Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: admin
ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±: admin123456
```

## ğŸ§  Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©

| Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ | Ø§Ù„ÙˆØµÙ |
|---------|-------|
| **Gradient Boosting** | Ø§Ù„ØªÙ†Ø¨Ø¤ Ø¨Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠ |
| **K-Means Clustering** | ØªØµÙ†ÙŠÙ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† |
| **Statistical Analysis** | Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠ Ø§Ù„Ù…ØªÙ‚Ø¯Ù… |
| **Anomaly Detection** | ÙƒØ´Ù Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø´Ø§Ø°Ø© |

## ğŸ“ Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ù„ÙØ§Øª

```
hr/
â”œâ”€â”€ app.py           # Ø§Ù„Ù€ backend Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
â”œâ”€â”€ script.js        # Ø§Ù„Ù€ frontend
â”œâ”€â”€ index.html       # ØµÙØ­Ø© Ø§Ù„Ù…Ø±Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰
â”œâ”€â”€ styles.css       # Ø§Ù„ØªØµÙ…ÙŠÙ…
â””â”€â”€ requirements.txt # Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª
```

## ğŸ” Ø§Ù„Ø£Ù…Ø§Ù†

- ÙƒÙ„Ù…Ø§Øª Ù…Ø±ÙˆØ± Ù…Ø´ÙØ±Ø© Ø¨Ù€ bcrypt
- Ø¬Ù„Ø³Ø§Øª Ø¢Ù…Ù†Ø© Ù…Ø¹ timeout 2 Ø³Ø§Ø¹Ø©
- Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† IP ÙˆØ§Ù„ØªÙˆÙƒÙ†
- Ø­Ø¯ Ø£Ù‚ØµÙ‰ Ù„Ø¹Ø¯Ø¯ Ù…Ø­Ø§ÙˆÙ„Ø§Øª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„

## ğŸ“Š API Endpoints

| Ø§Ù„Ù€ Endpoint | Ø§Ù„ÙˆØµÙ |
|------------|-------|
| `POST /login` | ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ |
| `POST /upload` | Ø±ÙØ¹ Ø§Ù„Ù…Ù„Ù |
| `POST /ai-analyze` | Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø°ÙƒÙŠ |
| `POST /analyze-custom` | ØªØ­Ù„ÙŠÙ„ Ù…Ø®ØµØµ |
| `GET /auth-check` | Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¬Ù„Ø³Ø© |

## ğŸ”§ Ø§Ù„ØªØ·ÙˆÙŠØ±

```bash
# ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª
pip3 install -r requirements.txt

# Ù…Ø³Ø­ Ø§Ù„Ù€ cache
find . -type d -name __pycache__ -exec rm -r {} +

# Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙƒÙˆØ¯
python3 -m py_compile app.py
node --check script.js
```

---

**ØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± Ø¨ÙˆØ§Ø³Ø·Ø©:** turkiabdullah3
**Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«:** 6 ÙØ¨Ø±Ø§ÙŠØ± 2026

### 5. Create Systemd Service
```bash
sudo cp hr-analytics.service /etc/systemd/system/
sudo systemctl daemon-reload
sudo systemctl enable hr-analytics
sudo systemctl start hr-analytics
```

### 6. Setup SSL
```bash
sudo certbot --nginx -d analysis.turki20.sa -d www.analysis.turki20.sa
```

---

## Service Management

```bash
# View status
sudo systemctl status hr-analytics

# Restart service
sudo systemctl restart hr-analytics

# View logs
sudo journalctl -u hr-analytics -f

# Stop service
sudo systemctl stop hr-analytics
```

---

## File Structure

```
/var/www/hr-analytics/
â”œâ”€â”€ app.py                    # Original Flask app (development)
â”œâ”€â”€ production_server.py      # Production Flask app (use this)
â”œâ”€â”€ index.html               # Main HTML page
â”œâ”€â”€ styles.css               # Styling
â”œâ”€â”€ script.js                # Frontend JavaScript
â”œâ”€â”€ nginx.conf               # Nginx configuration
â”œâ”€â”€ deploy.sh                # Deployment script
â””â”€â”€ README.md               # This file

/var/log/hr-analytics/
â”œâ”€â”€ app.log                  # Application logs
â””â”€â”€ error.log               # Error logs
```

---

## API Endpoints

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/` | GET | Main page |
| `/init-session` | GET | Initialize session |
| `/upload` | POST | Upload Excel file |
| `/progress` | GET | Get processing progress |
| `/analytics` | POST | Get analytics results |
| `/get-columns` | POST | Get file columns |
| `/analyze-custom` | POST | Custom analysis |
| `/clear` | POST | Clear data |
| `/status` | GET | Health check |
| `/health` | GET | Load balancer health |

---

## Troubleshooting

### App not starting
```bash
# Check logs
sudo journalctl -u hr-analytics -e

# Check port
sudo lsof -i :8080
```

### Nginx errors
```bash
# Test config
sudo nginx -t

# Check nginx logs
sudo tail -f /var/log/nginx/error.log
```

### SSL certificate issues
```bash
# Renew certificate
sudo certbot renew

# Test renewal
sudo certbot renew --dry-run
```

### Domain not resolving
- Wait 24-48 hours for DNS propagation
- Check domain DNS settings
- Verify A record points to server IP

---

## Security Notes

1. **Keep SSL certificates renewed** - Auto-renewal is set up
2. **Firewall** - UFW is configured to allow only needed ports
3. **Sessions** - Automatically expire after 2 hours
4. **Rate limiting** - Built into the application

---

## Support

For issues:
1. Check application logs: `sudo journalctl -u hr-analytics -f`
2. Check nginx logs: `sudo tail -f /var/log/nginx/error.log`
3. Verify service status: `sudo systemctl status hr-analytics`

---

## Ministry of Education - KSA

This system is configured for the Ministry of Education's Performance Management department.
All data processing is done locally on the server.

